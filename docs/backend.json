{
  "entities": {
    "Appointment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Appointment",
      "type": "object",
      "description": "Represents a single appointment booking.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the appointment."
        },
        "customerId": {
          "type": "string",
          "description": "Reference to the Customer who booked the appointment. (Relationship: Customer 1:N Appointment)"
        },
        "serviceId": {
          "type": "string",
          "description": "Reference to the Service being booked. (Relationship: Service 1:N Appointment)"
        },
        "appointmentDateTime": {
          "type": "string",
          "description": "The date and time of the appointment.",
          "format": "date-time"
        },
        "notes": {
          "type": "string",
          "description": "Any notes related to the appointment."
        }
      },
      "required": [
        "id",
        "customerId",
        "serviceId",
        "appointmentDateTime"
      ]
    },
    "Customer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Customer",
      "type": "object",
      "description": "Represents a customer of the salon.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the customer."
        },
        "firstName": {
          "type": "string",
          "description": "The customer's first name."
        },
        "lastName": {
          "type": "string",
          "description": "The customer's last name."
        },
        "email": {
          "type": "string",
          "description": "The customer's email address.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "The customer's phone number."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email"
      ]
    },
    "Service": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Service",
      "type": "object",
      "description": "Represents a service offered by the salon.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the service."
        },
        "name": {
          "type": "string",
          "description": "The name of the service."
        },
        "description": {
          "type": "string",
          "description": "A description of the service."
        },
        "price": {
          "type": "number",
          "description": "The price of the service."
        },
        "durationMinutes": {
          "type": "number",
          "description": "The duration of the service in minutes."
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "price",
        "durationMinutes"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/customers/{customerId}": {
      "schema": {
        "$ref": "#/backend/entities/Customer"
      },
      "description": "Stores customer profiles.  Each document represents a customer. Uses path-based ownership."
    },
    "/customers/{customerId}/appointments/{appointmentId}": {
      "schema": {
        "$ref": "#/backend/entities/Appointment"
      },
      "description": "Stores appointments for each customer. Includes denormalized 'customerId' for authorization independence."
    },
    "/services/{serviceId}": {
      "schema": {
        "$ref": "#/backend/entities/Service"
      },
      "description": "Stores the services offered by the salon."
    },
    "/roles_admin/{uid}": {
      "schema": {
        "$ref": "#/backend/entities/Customer"
      },
      "description": "Documents in this collection grant admin privileges. Existence of a document with a specific UID grants admin role to that user."
    }
  }
}